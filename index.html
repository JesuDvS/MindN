<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NoteChat - Organizador de Notas</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
    <!-- Modal de inicio -->
    <div id="startModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Bienvenido a NoteChat</h2>
                <p>Tu organizador de notas estilo chat</p>
            </div>
            <div class="modal-body">
                <button class="btn-primary" id="newSession">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <path fill="currentColor" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                    </svg>
                    Empezar Nueva Sesi√≥n
                </button>
                <div class="divider">O</div>
                <button class="btn-secondary" id="loadSession">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <path fill="currentColor" d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/>
                    </svg>
                    Cargar Datos Guardados
                </button>
                <input type="file" id="fileInput" accept=".json" style="display: none;">
            </div>
        </div>
    </div>

    <div id="app" style="display: none;">
        <div class="whatsapp-container">
            <!-- Panel lateral izquierdo -->
            <aside class="sidebar">
                <!-- Header del sidebar -->
                <header class="sidebar-header">
                    <div class="user-info">
                        <div class="user-avatar">
                            <svg viewBox="0 0 24 24" width="32" height="32">
                                <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                            </svg>
                        </div>
                        <span class="app-title">NoteChat</span>
                    </div>
                    <div class="sidebar-actions">
                        <button class="icon-btn" id="exportBtn" title="Exportar datos">
                            <svg viewBox="0 0 24 24" width="24" height="24">
                                <path fill="currentColor" d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"/>
                            </svg>
                        </button>
                        <button class="icon-btn" id="importBtn" title="Importar datos">
                            <svg viewBox="0 0 24 24" width="24" height="24">
                                <path fill="currentColor" d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/>
                            </svg>
                        </button>
                        <button class="icon-btn" id="addChatBtn" title="Nuevo chat">
                            <svg viewBox="0 0 24 24" width="24" height="24">
                                <path fill="currentColor" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                            </svg>
                        </button>
                    </div>
                </header>

                <!-- Barra de b√∫squeda -->
                <div class="search-container">
                    <div class="search-wrapper">
                        <svg viewBox="0 0 24 24" width="24" height="24">
                            <path fill="currentColor" d="M15.009 13.805h-.636l-.22-.219a5.184 5.184 0 0 0 1.256-3.386 5.207 5.207 0 1 0-5.207 5.208 5.183 5.183 0 0 0 3.385-1.255l.221.22v.635l4.004 3.999 1.194-1.195-3.997-4.007zm-4.808 0a3.605 3.605 0 1 1 0-7.21 3.605 3.605 0 0 1 0 7.21z"/>
                        </svg>
                        <input type="text" placeholder="Buscar chats o notas" id="searchInput">
                    </div>
                </div>

                <!-- Lista de chats -->
                <div class="chats-list" id="chatsList">
                    <!-- Los chats se cargar√°n din√°micamente -->
                </div>
            </aside>

            <!-- Panel principal de chat -->
            <main class="chat-panel">
                <!-- Vista por defecto -->
                <div class="default-view" id="defaultView">
                    <div class="default-content">
                        <div class="default-icon">
                            <svg width="250" height="250" viewBox="0 0 250 250">
                                <circle cx="125" cy="125" r="120" fill="#00a884" opacity="0.1"/>
                                <path fill="#00a884" d="M125 50c-41.4 0-75 33.6-75 75 0 13.2 3.4 25.7 9.5 36.5L50 200l39.7-9.5c10.5 5.7 22.5 8.9 35.3 8.9 41.4 0 75-33.6 75-75s-33.6-75-75-75zm0 120c-24.8 0-45-20.2-45-45s20.2-45 45-45 45 20.2 45 45-20.2 45-45 45z"/>
                                <path fill="#00a884" d="M125 90c-19.3 0-35 15.7-35 35s15.7 35 35 35 35-15.7 35-35-15.7-35-35-35zm0 55c-11 0-20-9-20-20s9-20 20-20 20 9 20 20-9 20-20 20z"/>
                            </svg>
                        </div>
                        <h2>NoteChat</h2>
                        <p>Organiza tus notas como conversaciones</p>
                        <p class="subtitle">Crea un nuevo chat para empezar</p>
                    </div>
                </div>

                <!-- Vista de chat activo -->
                <div class="chat-view" id="chatView" style="display: none;">
                    <!-- Header del chat -->
                    <header class="chat-header">
                        <div class="chat-header-info">
                            <div class="chat-icon" id="chatIcon"></div>
                            <div class="chat-info">
                                <h3 id="chatName">Nombre del chat</h3>
                                <span id="chatDescription">Descripci√≥n</span>
                            </div>
                        </div>
                        <div class="chat-actions">
                            <button class="icon-btn" id="editChatBtn" title="Editar chat">
                                <svg viewBox="0 0 24 24" width="24" height="24">
                                    <path fill="currentColor" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                                </svg>
                            </button>
                            <button class="icon-btn" id="deleteChatBtn" title="Eliminar chat">
                                <svg viewBox="0 0 24 24" width="24" height="24">
                                    <path fill="currentColor" d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                                </svg>
                            </button>
                        </div>
                    </header>

                    <!-- √Årea de notas/mensajes -->
                    <div class="messages-container" id="messagesContainer">
                        <!-- Las notas se cargar√°n din√°micamente -->
                    </div>

                    <!-- Footer con input de nota -->
                    <footer class="chat-footer">
                        <button class="icon-btn" id="attachBtn" title="Adjuntar archivo">
                            <svg viewBox="0 0 24 24" width="24" height="24">
                                <path fill="currentColor" d="M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"/>
                            </svg>
                        </button>
                        <input type="file" id="fileAttach" multiple style="display: none;">
                        <div class="message-input-wrapper">
                            <textarea placeholder="Escribe una nota..." id="messageInput" rows="1"></textarea>
                        </div>
                        <button class="icon-btn" id="sendBtn" title="Guardar nota">
                            <svg viewBox="0 0 24 24" width="24" height="24">
                                <path fill="currentColor" d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                            </svg>
                        </button>
                    </footer>
                </div>
            </main>
        </div>
    </div>

    <!-- Modal para crear/editar chat -->
    <div id="chatModal" class="modal" style="display: none;">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h3 id="modalTitle">Nuevo Chat</h3>
                <button class="close-btn" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Nombre del Chat</label>
                    <input type="text" id="chatNameInput" placeholder="Ej: Ideas de Proyecto">
                </div>
                <div class="form-group">
                    <label>Descripci√≥n</label>
                    <input type="text" id="chatDescInput" placeholder="Ej: Notas sobre el proyecto X">
                </div>
                <div class="form-group">
                    <label>Icono</label>
                    <div class="icon-picker" id="iconPicker">
                        <button class="icon-option" data-icon="üí°">üí°</button>
                        <button class="icon-option" data-icon="üìù">üìù</button>
                        <button class="icon-option" data-icon="üìö">üìö</button>
                        <button class="icon-option" data-icon="üíº">üíº</button>
                        <button class="icon-option" data-icon="üéØ">üéØ</button>
                        <button class="icon-option" data-icon="üöÄ">üöÄ</button>
                        <button class="icon-option" data-icon="‚≠ê">‚≠ê</button>
                        <button class="icon-option" data-icon="üé®">üé®</button>
                        <button class="icon-option" data-icon="üîß">üîß</button>
                        <button class="icon-option" data-icon="üìä">üìä</button>
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="btn-secondary" id="cancelBtn">Cancelar</button>
                    <button class="btn-primary" id="saveChatBtn">Guardar</button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/router.js"></script>
    <script src="js/main.js"></script>
</body>
</html>